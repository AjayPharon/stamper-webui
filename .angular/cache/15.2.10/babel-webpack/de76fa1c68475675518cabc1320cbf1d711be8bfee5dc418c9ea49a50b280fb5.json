{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/aj_ph/Documents/Esi/stamper-webui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { CBSignImage } from '../Context/CBSignImage';\nimport { lastValueFrom } from 'rxjs';\nimport { environment as env } from '../../environments/environment';\nimport { CBDocumentImage } from '../Context/CBDocumentImage';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../_services/httpConnectService.service\";\nimport * as i2 from \"./../_services/common.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"angular2-draggable\";\nimport * as i5 from \"primeng/button\";\nimport * as i6 from \"primeng/api\";\nimport * as i7 from \"primeng/fileupload\";\nimport * as i8 from \"primeng/galleria\";\nimport * as i9 from \"@angular/forms\";\nimport * as i10 from \"primeng/dialog\";\nfunction SignStamperComponent_ng_template_7_ng_container_3_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 25);\n    i0.ɵɵlistener(\"endOffset\", function SignStamperComponent_ng_template_7_ng_container_3_div_1_Template_div_endOffset_0_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const component_r5 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r7.onMoveEnd($event, component_r5));\n    })(\"rzResizing\", function SignStamperComponent_ng_template_7_ng_container_3_div_1_Template_div_rzResizing_0_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const component_r5 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r9.onResizing($event, component_r5));\n    })(\"click\", function SignStamperComponent_ng_template_7_ng_container_3_div_1_Template_div_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const component_r5 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r10.clickComponent(component_r5));\n    });\n    i0.ɵɵelement(1, \"img\", 26, 27);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const component_r5 = ctx.$implicit;\n    i0.ɵɵnextContext(2);\n    const _r2 = i0.ɵɵreference(1);\n    i0.ɵɵproperty(\"rzAspectRatio\", true)(\"bounds\", _r2)(\"inBounds\", true)(\"rzMinWidth\", 100)(\"rzMaxWidth\", 612)(\"rzMinHeight\", 100)(\"rzMaxHeight\", 792);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"width\", component_r5.signWidth)(\"height\", component_r5.signHeight)(\"src\", component_r5.signContent, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction SignStamperComponent_ng_template_7_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, SignStamperComponent_ng_template_7_ng_container_3_div_1_Template, 3, 10, \"div\", 24);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.signImageList);\n  }\n}\nfunction SignStamperComponent_ng_template_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 20, 21)(2, \"img\", 22);\n    i0.ɵɵlistener(\"click\", function SignStamperComponent_ng_template_7_Template_img_click_2_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.showTextFrame($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, SignStamperComponent_ng_template_7_ng_container_3_Template, 2, 1, \"ng-container\", 23);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", item_r1, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.signVisible);\n  }\n}\nconst _c0 = function () {\n  return {\n    \"max-width\": \"612px\"\n  };\n};\nconst _c1 = function () {\n  return {\n    width: \"40vw\"\n  };\n};\nconst _c2 = function () {\n  return {\n    \"1200px\": \"60vw\",\n    \"800px\": \"90vw\"\n  };\n};\nexport class SignStamperComponent {\n  constructor(httpService, commonService) {\n    this.httpService = httpService;\n    this.commonService = commonService;\n    this.xPosition = 0;\n    this.yPosition = 0;\n    this.scaleX = 100;\n    this.scaleY = 100;\n    this.documentID = \"\";\n    this._activeIndex = 0;\n    this.documentImageList = [];\n    this.signImageList = [];\n    this.signVisible = false;\n    this.images = [];\n    this.size = null;\n    this.zoom = 1.0;\n    this.showImage = false;\n    this.degree = 0;\n    this.showGallery = false;\n    this.position = 'bottom';\n    this.textStamp = '';\n    this.showFrame = false;\n    this.textValue = '';\n    this.frameTop = 0;\n    this.frameLeft = 0;\n    this.DisplayDialogAddTopic = false;\n    this.responsiveOptions = [{\n      breakpoint: '1024px',\n      numVisible: 5\n    }, {\n      breakpoint: '768px',\n      numVisible: 3\n    }, {\n      breakpoint: '560px',\n      numVisible: 1\n    }];\n  }\n  showTextFrame(event) {\n    this.showFrame = true;\n    this.frameTop = event.clientY;\n    this.frameLeft = event.clientX;\n  }\n  confirmText() {\n    // ทำสิ่งที่คุณต้องการเมื่อผู้ใช้ยืนยันข้อความ\n    console.log('ข้อความที่กรอก:', this.textValue);\n    // ซ่อนกล่องพิมข้อความ\n    this.showFrame = false;\n  }\n  saveText() {\n    console.log('ข้อความที่กรอก:', this.textValue);\n  }\n  calculateWidth() {\n    // คำนวณความกว้างของ input จากความยาวของข้อความที่กรอก\n    return this.textValue.length * 10; // ปรับตัวคูณตามความต้องการ\n  }\n\n  openDialog() {\n    this.DisplayDialogAddTopic = true;\n  }\n  openDialog() {\n    this.DisplayDialogAddTopic = true;\n  }\n  get activeIndex() {\n    return this._activeIndex;\n  }\n  set activeIndex(newValue) {\n    if (this.images && 0 <= newValue && newValue <= this.images.length - 1) {\n      this._activeIndex = newValue;\n    }\n  }\n  ngOnInit() {}\n  onFileSelect(event) {\n    const reader = new FileReader();\n    for (let file of event.files) {\n      reader.readAsDataURL(file);\n      reader.onload = event => {\n        let sign_item = new CBSignImage();\n        sign_item.signContent = reader.result.toString();\n        sign_item.signWidth = this.scaleX;\n        sign_item.signHeight = this.scaleY;\n        sign_item.x = this.xPosition;\n        sign_item.y = this.yPosition;\n        sign_item.pageNumber = this._activeIndex;\n        sign_item.documentID = this.documentID;\n        sign_item.textStamp = this.textStamp;\n        this.signImageList.push(sign_item);\n      };\n    }\n    console.log(this.signImageList);\n    this.signVisible = true;\n  }\n  onFileRemove(event) {\n    event.files.pop();\n  }\n  stamp() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      // let ao_item = new CBSignImage();\n      // ao_item.fileContent = this.signBase64.split(',')[1];\n      // ao_item.scaleX = this.scaleX;\n      // ao_item.scaleY = this.scaleY;\n      // ao_item.xPosition = this.xPosition;\n      // ao_item.yPosition = this.yPosition;\n      console.log(_this.signImageList.at(0)?.x);\n      console.log(_this.signImageList.at(0)?.y);\n      // let payload = new HttpParams().set('requestData', JSON.stringify(this.signImageList))\n      let response = yield lastValueFrom(_this.httpService.ConnectByPOST_JSON(`${env.localhost}/stamper/stampDocument`, _this.signImageList));\n      if (response != null) {\n        console.log('image edited');\n      }\n    })();\n  }\n  documentUpload(event) {\n    const reader = new FileReader();\n    for (let file of event.files) {\n      reader.readAsDataURL(file);\n      reader.onload = event => {\n        this.upload(file, 100);\n        // let document_item = new CBDocumentImage();\n        // document_item.fileContent = reader.result!.toString();\n        // document_item.scaleX = this.scaleX;\n        // document_item.scaleY = this.scaleY;\n        // document_item.xPosition = this.xPosition;\n        // document_item.yPosition = this.yPosition;\n        // document_item.imageId = this.li_CBImage[this.activeIndex].id\n        // this.documentImageList.push(document_item);\n      };\n    }\n  }\n\n  upload(file, ai_letterType) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      const methodName = \"multiupload\";\n      console.log(\"START \" + methodName);\n      let urlPath = env.localhost + \"/stamper/convert\";\n      let formData = new FormData();\n      formData.append('file', file);\n      formData.append('filename', file.name);\n      formData.append('letterType', ai_letterType.toString());\n      console.log(\"ทดสอบ\", formData.getAll('file'));\n      try {\n        const response = yield _this2.httpService.ConnectByPOSTFormData(urlPath, formData).toPromise();\n        console.log(\"Upload response:\", response);\n        let documentCB = new CBDocumentImage(_this2.commonService);\n        documentCB.JSONToCB(response);\n        _this2.documentID = documentCB.documentID;\n        _this2.documentImageList = documentCB.imageBase64;\n        console.log('id', _this2.documentID);\n      } catch (error) {\n        console.error(\"Upload error:\", error);\n      }\n    })();\n  }\n  showNextImage() {\n    this._activeIndex++;\n    // this.currentImageIndex = (this.currentImageIndex + 1) % this.li_CBScanImage.length;\n    // for (let i = 0; i < this.documentImageList.length; i++) {\n    //   console.log('image id: ',this.documentImageList.at(i)['imageId']);\n    //   console.log('image index: ',this.activeIndex);\n    //   if (this.documentImageList.at(this.activeIndex) === this.documentImageList.at(i)) {\n    //     this.signVisible = true;\n    //   } else {\n    //     this.signVisible = false;\n    //   }\n    // }\n  }\n\n  showPreviousImage() {\n    this._activeIndex--;\n    // this.currentImageIndex = (this.currentImageIndex - 1 + this.li_CBScanImage.length) % this.li_CBScanImage.length;\n    // for (let i = 0; i < this.documentImageList.length; i++) {\n    //   console.log('image id: ',this.documentImageList.at(i)['imageId']);\n    //   console.log('image index: ',this.activeIndex);\n    //   if (this.documentImageList.at(this.activeIndex) === this.documentImageList.at(i)) {\n    //     this.signVisible = true;\n    //     console.log(this.documentImageList.at(i));\n    //   } else {\n    //     this.signVisible = false;\n    //   }\n    // }\n  }\n\n  clickComponent(component) {\n    console.log('click', component);\n  }\n  onMoveEnd(event, component) {\n    component.x = event.x;\n    component.y = event.y;\n    console.log(event.x, event.y);\n    console.log('index : ', this._activeIndex);\n  }\n  onResizing(event, component) {\n    this.size = event.size;\n    console.log(this.size);\n    component.signWidth = event.size.width;\n    component.signHeight = event.size.height;\n  }\n  static #_ = this.ɵfac = function SignStamperComponent_Factory(t) {\n    return new (t || SignStamperComponent)(i0.ɵɵdirectiveInject(i1.HttpConnectService), i0.ɵɵdirectiveInject(i2.CommonService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SignStamperComponent,\n    selectors: [[\"app-sign-stamper\"]],\n    decls: 23,\n    vars: 28,\n    consts: [[1, \"d-flex\"], [1, \"col-8\"], [1, \"d-flex\", \"justify-content-center\"], [1, \"d-flex\", \"flex-column\"], [1, \"card\"], [3, \"value\", \"showItemNavigators\", \"thumbnailsPosition\", \"showThumbnails\", \"activeIndex\", \"responsiveOptions\", \"containerStyle\", \"numVisible\", \"activeIndexChange\"], [\"pTemplate\", \"item\"], [1, \"d-flex\", \"justify-content-between\"], [\"icon\", \"pi pi-chevron-left\", 3, \"click\"], [\"icon\", \"pi pi-chevron-right\", 3, \"click\"], [1, \"col-3\"], [1, \"col\", \"mt-5\"], [\"name\", \"file[]\", \"accept\", \".pdf\", \"chooseLabel\", \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E40\\u0E2D\\u0E01\\u0E2A\\u0E32\\u0E23\", 3, \"multiple\", \"showUploadButton\", \"showCancelButton\", \"fileLimit\", \"onSelect\", \"onRemove\"], [\"label\", \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E02\\u0E49\\u0E2D\\u0E04\\u0E27\\u0E32\\u0E21\", 3, \"click\"], [\"name\", \"file[]\", \"accept\", \"image/*\", \"chooseLabel\", \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E25\\u0E32\\u0E22\\u0E40\\u0E0B\\u0E47\\u0E19\", 3, \"multiple\", \"showUploadButton\", \"showCancelButton\", \"fileLimit\", \"onSelect\", \"onRemove\"], [1, \"mt-2\"], [\"label\", \"Stamp\", 3, \"click\"], [\"header\", \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E2B\\u0E31\\u0E27\\u0E02\\u0E49\\u0E2D\\u0E15\\u0E31\\u0E27\\u0E0A\\u0E35\\u0E49\\u0E27\\u0E31\\u0E14\", 1, \"pnDialog\", 3, \"visible\", \"modal\", \"dismissableMask\", \"draggable\", \"resizable\", \"breakpoints\", \"visibleChange\"], [\"id\", \"stamp\", \"type\", \"text\", \"pInputText\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"label\", \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E02\\u0E49\\u0E2D\\u0E04\\u0E27\\u0E32\\u0E21\"], [1, \"bg-img\"], [\"mybounds\", \"\"], [\"alt\", \"\\u0E23\\u0E39\\u0E1B\\u0E20\\u0E32\\u0E1E\", 1, \"img-single\", 3, \"src\", \"click\"], [4, \"ngIf\"], [\"ngDraggable\", \"\", \"ngResizable\", \"\", \"rzHandles\", \"n,s,e,w,se,sw\", \"class\", \"sign-img\", 3, \"rzAspectRatio\", \"bounds\", \"inBounds\", \"rzMinWidth\", \"rzMaxWidth\", \"rzMinHeight\", \"rzMaxHeight\", \"endOffset\", \"rzResizing\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"ngDraggable\", \"\", \"ngResizable\", \"\", \"rzHandles\", \"n,s,e,w,se,sw\", 1, \"sign-img\", 3, \"rzAspectRatio\", \"bounds\", \"inBounds\", \"rzMinWidth\", \"rzMaxWidth\", \"rzMinHeight\", \"rzMaxHeight\", \"endOffset\", \"rzResizing\", \"click\"], [3, \"width\", \"height\", \"src\"], [\"targetRef\", \"\"]],\n    template: function SignStamperComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"body\")(1, \"div\", 0)(2, \"div\", 1)(3, \"div\", 2)(4, \"div\", 3)(5, \"div\", 4)(6, \"p-galleria\", 5);\n        i0.ɵɵlistener(\"activeIndexChange\", function SignStamperComponent_Template_p_galleria_activeIndexChange_6_listener($event) {\n          return ctx.activeIndex = $event;\n        });\n        i0.ɵɵtemplate(7, SignStamperComponent_ng_template_7_Template, 4, 2, \"ng-template\", 6);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(8, \"div\", 7)(9, \"p-button\", 8);\n        i0.ɵɵlistener(\"click\", function SignStamperComponent_Template_p_button_click_9_listener() {\n          return ctx.showPreviousImage();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"p-button\", 9);\n        i0.ɵɵlistener(\"click\", function SignStamperComponent_Template_p_button_click_10_listener() {\n          return ctx.showNextImage();\n        });\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(11, \"div\", 10)(12, \"div\", 11)(13, \"p-fileUpload\", 12);\n        i0.ɵɵlistener(\"onSelect\", function SignStamperComponent_Template_p_fileUpload_onSelect_13_listener($event) {\n          return ctx.documentUpload($event);\n        })(\"onRemove\", function SignStamperComponent_Template_p_fileUpload_onRemove_13_listener($event) {\n          return ctx.onFileRemove($event);\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(14, \"div\", 11)(15, \"p-button\", 13);\n        i0.ɵɵlistener(\"click\", function SignStamperComponent_Template_p_button_click_15_listener() {\n          return ctx.openDialog();\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(16, \"div\", 11)(17, \"p-fileUpload\", 14);\n        i0.ɵɵlistener(\"onSelect\", function SignStamperComponent_Template_p_fileUpload_onSelect_17_listener($event) {\n          return ctx.onFileSelect($event);\n        })(\"onRemove\", function SignStamperComponent_Template_p_fileUpload_onRemove_17_listener($event) {\n          return ctx.onFileRemove($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"div\", 15)(19, \"p-button\", 16);\n        i0.ɵɵlistener(\"click\", function SignStamperComponent_Template_p_button_click_19_listener() {\n          return ctx.stamp();\n        });\n        i0.ɵɵelementEnd()()()()()();\n        i0.ɵɵelementStart(20, \"p-dialog\", 17);\n        i0.ɵɵlistener(\"visibleChange\", function SignStamperComponent_Template_p_dialog_visibleChange_20_listener($event) {\n          return ctx.DisplayDialogAddTopic = $event;\n        });\n        i0.ɵɵelementStart(21, \"input\", 18);\n        i0.ɵɵlistener(\"ngModelChange\", function SignStamperComponent_Template_input_ngModelChange_21_listener($event) {\n          return ctx.textStamp = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(22, \"p-button\", 19);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"value\", ctx.documentImageList)(\"showItemNavigators\", true)(\"thumbnailsPosition\", ctx.position)(\"showThumbnails\", false)(\"activeIndex\", ctx.activeIndex)(\"responsiveOptions\", ctx.responsiveOptions)(\"containerStyle\", i0.ɵɵpureFunction0(25, _c0))(\"numVisible\", 5);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"multiple\", false)(\"showUploadButton\", false)(\"showCancelButton\", false)(\"fileLimit\", 1);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"multiple\", true)(\"showUploadButton\", false)(\"showCancelButton\", false)(\"fileLimit\", 5);\n        i0.ɵɵadvance(3);\n        i0.ɵɵstyleMap(i0.ɵɵpureFunction0(26, _c1));\n        i0.ɵɵproperty(\"visible\", ctx.DisplayDialogAddTopic)(\"modal\", true)(\"dismissableMask\", true)(\"draggable\", false)(\"resizable\", false)(\"breakpoints\", i0.ɵɵpureFunction0(27, _c2));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngModel\", ctx.textStamp);\n      }\n    },\n    dependencies: [i3.NgForOf, i3.NgIf, i4.AngularDraggableDirective, i4.AngularResizableDirective, i5.Button, i6.PrimeTemplate, i7.FileUpload, i8.Galleria, i9.DefaultValueAccessor, i9.NgControlStatus, i9.NgModel, i10.Dialog],\n    styles: [\"@charset \\\"UTF-8\\\";\\n.image-list[_ngcontent-%COMP%] {\\n  display: flex; \\n  flex-wrap: wrap; \\n  gap: 16px; \\n}\\n\\n.image-slider[_ngcontent-%COMP%] {\\n  width: 1700px;\\n  height: 2200px;\\n  border: 1px solid #000000;\\n  overflow: hidden;\\n  cursor: move;\\n  box-sizing: border-box;\\n  transform: scale(100%);\\n  transform: translate(0%, 0%);\\n  display: inline-flex;\\n  z-index: 1;\\n}\\n\\n.img-single[_ngcontent-%COMP%] {\\n  max-width: 100%;\\n  max-height: 100%;\\n}\\n\\nhtml[_ngcontent-%COMP%], body[_ngcontent-%COMP%] {\\n  height: 100%;\\n}\\n\\nbody[_ngcontent-%COMP%] {\\n  margin: 0;\\n  font-family: Roboto, \\\"Helvetica Neue\\\", sans-serif;\\n}\\n\\n.sign-box[_ngcontent-%COMP%] {\\n  position: absolute;\\n  box-sizing: border-box;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  transform: translate(0%, 0%);\\n}\\n\\n.bg-img[_ngcontent-%COMP%] {\\n  width: 612px;\\n  height: 792px;\\n  border: solid 1px #000000;\\n  top: 0;\\n  left: 0;\\n  cursor: move;\\n  display: inline-flex;\\n  justify-content: center;\\n  align-items: center;\\n  text-align: center;\\n  background: #fff;\\n  z-index: 1;\\n  box-sizing: border-box;\\n}\\n\\n.sign-img[_ngcontent-%COMP%] {\\n  position: absolute;\\n  width: 100px;\\n  height: 100px;\\n  top: 0px;\\n  left: 0px;\\n  transform: translate(0px, 0px);\\n}\\n\\n.chooseButton[_ngcontent-%COMP%] {\\n  display: inline-block;\\n  background-color: indigo;\\n  color: white;\\n  padding: 0.5rem;\\n  font-family: sans-serif;\\n  border-radius: 0.3rem;\\n  cursor: pointer;\\n  margin-top: 1rem;\\n  margin-left: 1rem;\\n}\\n\\n.text-input[_ngcontent-%COMP%] {\\n  position: absolute;\\n  height: 50px;\\n  border: 1px solid #ccc;\\n  padding: 0px;\\n  background-color: transparent;\\n  color: black;\\n  font-size: 16px;\\n  text-align: center;\\n  outline: none;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvc2lnbi1zdGFtcGVyL3NpZ24tc3RhbXBlci5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxnQkFBZ0I7QUFBaEI7RUFDSSxhQUFBLEVBQUEsbUNBQUE7RUFDQSxlQUFBLEVBQUEsa0NBQUE7RUFDQSxTQUFBLEVBQUEsMEJBQUE7QUFFSjs7QUFDRTtFQUlFLGFBQUE7RUFDQSxjQUFBO0VBQ0EseUJBQUE7RUFDQSxnQkFBQTtFQUVBLFlBQUE7RUFDQSxzQkFBQTtFQUNBLHNCQUFBO0VBQ0EsNEJBQUE7RUFDQSxvQkFBQTtFQUNBLFVBQUE7QUFGSjs7QUFLRTtFQUNFLGVBQUE7RUFDQSxnQkFBQTtBQUZKOztBQVFFO0VBQWEsWUFBQTtBQUpmOztBQUtFO0VBQU8sU0FBQTtFQUFXLGlEQUFBO0FBQXBCOztBQUVFO0VBS0Usa0JBQUE7RUFFQSxzQkFBQTtFQUNBLGtCQUFBO0VBQ0EsTUFBQTtFQUNBLE9BQUE7RUFDQSw0QkFBQTtBQUpKOztBQU1FO0VBQ0UsWUFBQTtFQUNBLGFBQUE7RUFDQSx5QkFBQTtFQUVBLE1BQUE7RUFDQSxPQUFBO0VBQ0EsWUFBQTtFQUNBLG9CQUFBO0VBQ0EsdUJBQUE7RUFDQSxtQkFBQTtFQUNBLGtCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxVQUFBO0VBQ0Esc0JBQUE7QUFKSjs7QUFRRTtFQUNFLGtCQUFBO0VBQ0EsWUFBQTtFQUNBLGFBQUE7RUFDQSxRQUFBO0VBQ0EsU0FBQTtFQUNBLDhCQUFBO0FBTEo7O0FBUUU7RUFDRSxxQkFBQTtFQUNBLHdCQUFBO0VBQ0EsWUFBQTtFQUNBLGVBQUE7RUFDQSx1QkFBQTtFQUNBLHFCQUFBO0VBQ0EsZUFBQTtFQUNBLGdCQUFBO0VBQ0EsaUJBQUE7QUFMSjs7QUFRRTtFQUNFLGtCQUFBO0VBQ0EsWUFBQTtFQUNBLHNCQUFBO0VBQ0EsWUFBQTtFQUNBLDZCQUFBO0VBQ0EsWUFBQTtFQUNBLGVBQUE7RUFDQSxrQkFBQTtFQUNBLGFBQUE7QUFMSiIsInNvdXJjZXNDb250ZW50IjpbIi5pbWFnZS1saXN0IHtcclxuICAgIGRpc3BsYXk6IGZsZXg7IC8qIMOgwrnCg8OgwrjCq8OgwrnCicOgwrjCo8OgwrjCucOgwrjCm8OgwrjCoMOgwrjCssOgwrjCnsOgwrnCgcOgwrjCqsOgwrjClMOgwrjCh8OgwrnCgMOgwrjCo8OgwrjCtcOgwrjCosOgwrjCh8OgwrjClcOgwrnCiMOgwrjCrcOgwrjCgcOgwrjCscOgwrjCmcOgwrnCgcOgwrjCmcOgwrjCp8OgwrjCmcOgwrjCrcOgwrjCmSAqL1xyXG4gICAgZmxleC13cmFwOiB3cmFwOyAvKiDDoMK5woPDoMK4wqvDoMK5wonDoMK4woLDoMK4wrbDoMK5wonDoMK4wpnDoMK4wprDoMK4wqPDoMK4wqPDoMK4wpfDoMK4wrHDoMK4wpTDoMK5woPDoMK4wqvDoMK4wqHDoMK5wojDoMK5woDDoMK4wqHDoMK4wrfDoMK5wojDoMK4wq3DoMK4woTDoMK4wqPDoMK4wprDoMK4woLDoMK4wpnDoMK4wrLDoMK4wpQgKi9cclxuICAgIGdhcDogMTZweDsgLyogw6DCuMKjw6DCuMKww6DCuMKiw6DCuMKww6DCuMKrw6DCucKIw6DCuMKyw6DCuMKHw6DCuMKjw6DCuMKww6DCuMKrw6DCuMKnw6DCucKIw6DCuMKyw6DCuMKHw6DCuMKjw6DCuMK5w6DCuMKbw6DCuMKgw6DCuMKyw6DCuMKeICovXHJcbiAgfVxyXG4gIFxyXG4gIC5pbWFnZS1zbGlkZXIge1xyXG4gICAgLy8gZGlzcGxheTogZmxleDtcclxuICAgIC8vIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICAvLyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbiAgICB3aWR0aDogMTcwMHB4O1xyXG4gICAgaGVpZ2h0OiAyMjAwcHg7XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjMDAwMDAwO1xyXG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICAgIC8vIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgIGN1cnNvcjogbW92ZTtcclxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgICB0cmFuc2Zvcm06IHNjYWxlKDEwMCUpO1xyXG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCUsIDAlKTtcclxuICAgIGRpc3BsYXk6IGlubGluZS1mbGV4O1xyXG4gICAgei1pbmRleDogMTtcclxuICB9XHJcbiAgXHJcbiAgLmltZy1zaW5nbGUge1xyXG4gICAgbWF4LXdpZHRoOiAxMDAlO1xyXG4gICAgbWF4LWhlaWdodDogMTAwJTtcclxuICAgIC8vIHRyYW5zZm9ybTogc2NhbGUoMC41KTtcclxuICAgIC8vIGRpc3BsYXk6IGJsb2NrO1xyXG4gICAgLy8gbWFyZ2luOiAwIGF1dG87XHJcbiAgfVxyXG4gIFxyXG4gIGh0bWwsIGJvZHkgeyBoZWlnaHQ6IDEwMCU7IH1cclxuICBib2R5IHsgbWFyZ2luOiAwOyBmb250LWZhbWlseTogUm9ib3RvLCBcIkhlbHZldGljYSBOZXVlXCIsIHNhbnMtc2VyaWY7IH1cclxuICBcclxuICAuc2lnbi1ib3gge1xyXG4gICAgLy8gY3Vyc29yOiBtb3ZlO1xyXG4gICAgLy8gZGlzcGxheTogaW5saW5lLWZsZXg7XHJcbiAgICAvLyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgIC8vIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAvLyB6LWluZGV4OiAxO1xyXG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgIHRvcDogMDtcclxuICAgIGxlZnQ6IDA7XHJcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgwJSwgMCUpO1xyXG4gIH1cclxuICAuYmctaW1nIHtcclxuICAgIHdpZHRoOiA2MTJweDtcclxuICAgIGhlaWdodDogNzkycHg7XHJcbiAgICBib3JkZXI6IHNvbGlkIDFweCAjMDAwMDAwO1xyXG4gICAgLy8gcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgdG9wOiAwO1xyXG4gICAgbGVmdDogMDtcclxuICAgIGN1cnNvcjogbW92ZTtcclxuICAgIGRpc3BsYXk6IGlubGluZS1mbGV4O1xyXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgYmFja2dyb3VuZDogI2ZmZjtcclxuICAgIHotaW5kZXg6IDE7XHJcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gICAgLy8gdHJhbnNmb3JtOiB0cmFuc2xhdGUoMHB4LCAwcHgpO1xyXG4gIH1cclxuICBcclxuICAuc2lnbi1pbWcge1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgd2lkdGg6IDEwMHB4O1xyXG4gICAgaGVpZ2h0OiAxMDBweDtcclxuICAgIHRvcDogMHB4O1xyXG4gICAgbGVmdDogMHB4O1xyXG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoMHB4LCAwcHgpO1xyXG4gIH1cclxuICBcclxuICAuY2hvb3NlQnV0dG9uIHtcclxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICAgIGJhY2tncm91bmQtY29sb3I6IGluZGlnbztcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIHBhZGRpbmc6IDAuNXJlbTtcclxuICAgIGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmO1xyXG4gICAgYm9yZGVyLXJhZGl1czogMC4zcmVtO1xyXG4gICAgY3Vyc29yOiBwb2ludGVyO1xyXG4gICAgbWFyZ2luLXRvcDogMXJlbTtcclxuICAgIG1hcmdpbi1sZWZ0OiAxcmVtO1xyXG4gIH1cclxuICBcclxuICAudGV4dC1pbnB1dCB7XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBoZWlnaHQ6IDUwcHg7XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xyXG4gICAgcGFkZGluZzogMHB4O1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XHJcbiAgICBjb2xvcjogYmxhY2s7XHJcbiAgICBmb250LXNpemU6IDE2cHg7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICBvdXRsaW5lOiBub25lO1xyXG4gIH0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n  });\n}","map":{"version":3,"mappings":"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","names":["CBSignImage","lastValueFrom","environment","env","CBDocumentImage","i0","SignStamperComponent","constructor","httpService","commonService","breakpoint","numVisible","showTextFrame","event","showFrame","frameTop","clientY","frameLeft","clientX","confirmText","console","log","textValue","saveText","calculateWidth","length","openDialog","DisplayDialogAddTopic","activeIndex","_activeIndex","newValue","images","ngOnInit","onFileSelect","reader","FileReader","file","files","readAsDataURL","onload","sign_item","signContent","result","toString","signWidth","scaleX","signHeight","scaleY","x","xPosition","y","yPosition","pageNumber","documentID","textStamp","signImageList","push","signVisible","onFileRemove","pop","stamp","at","response","ConnectByPOST_JSON","localhost","documentUpload","upload","ai_letterType","methodName","urlPath","formData","FormData","append","name","getAll","ConnectByPOSTFormData","toPromise","documentCB","JSONToCB","documentImageList","imageBase64","error","showNextImage","showPreviousImage","clickComponent","component","onMoveEnd","onResizing","size","width","height","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\aj_ph\\Documents\\Esi\\stamper-webui\\src\\app\\sign-stamper\\sign-stamper.component.ts","C:\\Users\\aj_ph\\Documents\\Esi\\stamper-webui\\src\\app\\sign-stamper\\sign-stamper.component.html"],"sourcesContent":["import { CommonService } from './../_services/common.service';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { CBSignImage } from '../Context/CBSignImage';\r\nimport { HttpParams } from '@angular/common/http';\r\nimport { lastValueFrom } from 'rxjs';\r\nimport { HttpConnectService } from '../_services/httpConnectService.service';\r\nimport { environment as env } from '../../environments/environment';\r\nimport { CBDocumentImage } from '../Context/CBDocumentImage';\r\ninterface UploadEvent {\r\n  originalEvent: Event;\r\n  files: File[];\r\n}\r\n\r\n@Component({\r\n  selector: 'app-sign-stamper',\r\n  templateUrl: './sign-stamper.component.html',\r\n  styleUrls: ['./sign-stamper.component.scss']\r\n})\r\n\r\nexport class SignStamperComponent implements OnInit {\r\n  xPosition: number = 0;\r\n  yPosition: number = 0;\r\n  scaleX: number = 100;\r\n  scaleY: number = 100;\r\n  documentID: string = \"\";\r\n  _activeIndex: number = 0;\r\n  documentImageList: any[] = [];\r\n  signImageList: CBSignImage[] = []\r\n  signVisible = false;\r\n  images: any[] = [];\r\n  size: any = null;\r\n  zoom: number = 1.0;\r\n  showImage = false;\r\n  degree: number = 0;\r\n  showGallery = false;\r\n  position: string = 'bottom';\r\n  textStamp: string = '';\r\n\r\n  showFrame = false;\r\n  textValue = '';\r\n  frameTop = 0;\r\n  frameLeft = 0;\r\n\r\n  \r\n  DisplayDialogAddTopic: boolean = false;\r\n\r\n  constructor(   \r\n    private httpService: HttpConnectService,\r\n    private commonService : CommonService) { }\r\n\r\n    showTextFrame(event: MouseEvent) {\r\n      this.showFrame = true;\r\n      this.frameTop = event.clientY;\r\n      this.frameLeft = event.clientX;\r\n    }\r\n  \r\n    confirmText() {\r\n      // ทำสิ่งที่คุณต้องการเมื่อผู้ใช้ยืนยันข้อความ\r\n      console.log('ข้อความที่กรอก:', this.textValue);\r\n  \r\n      // ซ่อนกล่องพิมข้อความ\r\n      this.showFrame = false;\r\n    }\r\n\r\n     saveText() {\r\n      console.log('ข้อความที่กรอก:', this.textValue);\r\n    }\r\n\r\n    calculateWidth(): number {\r\n      // คำนวณความกว้างของ input จากความยาวของข้อความที่กรอก\r\n      return this.textValue.length * 10; // ปรับตัวคูณตามความต้องการ\r\n    }\r\n\r\n    openDialog() {\r\n      this.DisplayDialogAddTopic = true;\r\n    }\r\n\r\n    openDialog() {\r\n      this.DisplayDialogAddTopic = true;\r\n    }\r\n    \r\n  get activeIndex(): number {\r\n    return this._activeIndex;\r\n  }\r\n\r\n  set activeIndex(newValue) {\r\n    if (this.images && 0 <= newValue && newValue <= this.images.length - 1) {\r\n      this._activeIndex = newValue;\r\n    }\r\n  }\r\n\r\n  responsiveOptions: any[] = [\r\n    {\r\n      breakpoint: '1024px',\r\n      numVisible: 5\r\n    },\r\n    {\r\n      breakpoint: '768px',\r\n      numVisible: 3\r\n    },\r\n    {\r\n      breakpoint: '560px',\r\n      numVisible: 1\r\n    }\r\n  ];\r\n  ngOnInit() {\r\n\r\n  }\r\n  onFileSelect(event: UploadEvent) {\r\n    const reader = new FileReader();\r\n    for (let file of event.files) {\r\n      reader.readAsDataURL(file);\r\n      reader.onload = (event) => {\r\n        let sign_item = new CBSignImage();\r\n        sign_item.signContent = reader.result!.toString();\r\n        sign_item.signWidth = this.scaleX;\r\n        sign_item.signHeight = this.scaleY;\r\n        sign_item.x = this.xPosition;\r\n        sign_item.y = this.yPosition;\r\n        sign_item.pageNumber = this._activeIndex;\r\n        sign_item.documentID = this.documentID;\r\n        sign_item.textStamp =  this.textStamp;\r\n        this.signImageList.push(sign_item);\r\n      }\r\n    }\r\n    console.log(this.signImageList);\r\n    \r\n\r\n    this.signVisible = true;\r\n  }\r\n\r\n  onFileRemove(event: UploadEvent) {\r\n    event.files.pop();\r\n  }\r\n\r\n  async stamp() {\r\n    // let ao_item = new CBSignImage();\r\n    // ao_item.fileContent = this.signBase64.split(',')[1];\r\n    // ao_item.scaleX = this.scaleX;\r\n    // ao_item.scaleY = this.scaleY;\r\n    // ao_item.xPosition = this.xPosition;\r\n    // ao_item.yPosition = this.yPosition;\r\n    console.log(this.signImageList.at(0)?.x);\r\n    console.log(this.signImageList.at(0)?.y);\r\n    \r\n    // let payload = new HttpParams().set('requestData', JSON.stringify(this.signImageList))\r\n    let response = await lastValueFrom(this.httpService.ConnectByPOST_JSON(`${env.localhost}/stamper/stampDocument`, this.signImageList));\r\n    if (response != null) {\r\n      console.log('image edited');\r\n    }\r\n  }\r\n  documentUpload(event: UploadEvent) {\r\n    const reader = new FileReader();\r\n    for (let file of event.files) {\r\n      reader.readAsDataURL(file);\r\n      reader.onload = (event) => {\r\n        this.upload(file,100);\r\n        // let document_item = new CBDocumentImage();\r\n        // document_item.fileContent = reader.result!.toString();\r\n        // document_item.scaleX = this.scaleX;\r\n        // document_item.scaleY = this.scaleY;\r\n        // document_item.xPosition = this.xPosition;\r\n        // document_item.yPosition = this.yPosition;\r\n        // document_item.imageId = this.li_CBImage[this.activeIndex].id\r\n        // this.documentImageList.push(document_item);\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  async upload(file: File, ai_letterType: number){\r\n    const methodName = \"multiupload\";\r\n    console.log(\"START \" + methodName);\r\n    let urlPath: string = env.localhost + \"/stamper/convert\";\r\n    let formData = new FormData();\r\n    formData.append('file', file);\r\n    formData.append('filename',file.name)\r\n    formData.append('letterType', ai_letterType.toString());\r\n    console.log(\"ทดสอบ\",formData.getAll('file'));\r\n    try {\r\n        const response = await this.httpService.ConnectByPOSTFormData(urlPath, formData).toPromise();\r\n        console.log(\"Upload response:\", response);\r\n        let documentCB = new CBDocumentImage(this.commonService);\r\n        documentCB.JSONToCB(response);\r\n        this.documentID = documentCB.documentID;\r\n        this.documentImageList = documentCB.imageBase64;\r\n        console.log('id' , this.documentID);\r\n        \r\n    } catch (error) {\r\n        console.error(\"Upload error:\", error);\r\n    }\r\n  }\r\n\r\n  showNextImage() {\r\n    this._activeIndex++;\r\n    // this.currentImageIndex = (this.currentImageIndex + 1) % this.li_CBScanImage.length;\r\n\r\n    // for (let i = 0; i < this.documentImageList.length; i++) {\r\n    //   console.log('image id: ',this.documentImageList.at(i)['imageId']);\r\n    //   console.log('image index: ',this.activeIndex);\r\n    //   if (this.documentImageList.at(this.activeIndex) === this.documentImageList.at(i)) {\r\n    //     this.signVisible = true;\r\n    //   } else {\r\n    //     this.signVisible = false;\r\n    //   }\r\n    // }\r\n  }\r\n\r\n  showPreviousImage() {\r\n    this._activeIndex--;\r\n    // this.currentImageIndex = (this.currentImageIndex - 1 + this.li_CBScanImage.length) % this.li_CBScanImage.length;\r\n    // for (let i = 0; i < this.documentImageList.length; i++) {\r\n    //   console.log('image id: ',this.documentImageList.at(i)['imageId']);\r\n    //   console.log('image index: ',this.activeIndex);\r\n    //   if (this.documentImageList.at(this.activeIndex) === this.documentImageList.at(i)) {\r\n    //     this.signVisible = true;\r\n    //     console.log(this.documentImageList.at(i));\r\n\r\n\r\n    //   } else {\r\n    //     this.signVisible = false;\r\n    //   }\r\n    // }\r\n  }\r\n\r\n  clickComponent(component: CBSignImage) {\r\n    console.log('click', component);\r\n  }\r\n\r\n  onMoveEnd(event: any, component: CBSignImage) {\r\n    component.x = event.x;\r\n    component.y = event.y;\r\n    console.log(event.x, event.y);\r\n    console.log('index : ', this._activeIndex);\r\n  }\r\n\r\n  onResizing(event: any, component: CBSignImage) {\r\n    this.size = event.size;\r\n    console.log(this.size);\r\n    component.signWidth = event.size.width;\r\n    component.signHeight = event.size.height;\r\n  }\r\n}\r\n","<body>\r\n  <div class=\"d-flex\">\r\n    <div class=\"col-8\">\r\n      <div class=\"d-flex justify-content-center\">\r\n        <div class=\"d-flex flex-column \">\r\n          <div class=\"card\">\r\n            <p-galleria [value]=\"documentImageList\" [showItemNavigators]=\"true\" [thumbnailsPosition]=\"position\"\r\n              [showThumbnails]=\"false\" [(activeIndex)]=\"activeIndex\" [responsiveOptions]=\"responsiveOptions\"\r\n              [containerStyle]=\"{ 'max-width': '612px' }\" [numVisible]=\"5\">\r\n              <ng-template pTemplate=\"item\" let-item>\r\n                <div class=\"bg-img\" #mybounds>\r\n                  <img class=\"img-single\" [src]=\"item\" alt=\"รูปภาพ\" (click)=\"showTextFrame($event)\">\r\n\r\n                  <!-- <div class=\"container\" ngDraggable [bounds]=\"mybounds\" [inBounds]=\"true\">\r\n                    <input class=\"text-input\" id=\"userText\" [(ngModel)]=\"textValue\" [ngStyle]=\"{ 'width.px': calculateWidth() }\">\r\n                  </div>\r\n                  <button (click)=\"saveText()\">บันทึกข้อความ</button> -->\r\n\r\n                  <ng-container *ngIf=\"this.signVisible\">\r\n                    <div *ngFor=\"let component of this.signImageList\" ngDraggable ngResizable [rzAspectRatio]=\"true\"\r\n                      rzHandles=\"n,s,e,w,se,sw\" class=\"sign-img\" [bounds]=\"mybounds\" [inBounds]=\"true\"\r\n                      (endOffset)=\"onMoveEnd($event, component)\" (rzResizing)=\"onResizing($event, component)\"\r\n                      [rzMinWidth]=\"100\" [rzMaxWidth]=\"612\" [rzMinHeight]=\"100\" [rzMaxHeight]=\"792\"\r\n                      (click)=\"clickComponent(component)\">\r\n                      <img [width]=\"component.signWidth\" [height]=\"component.signHeight\" [src]=\"component.signContent\"\r\n                        #targetRef>\r\n                    </div>\r\n                  </ng-container>\r\n                </div>\r\n                <!-- <img [src]=\"item.imageBase64\" style=\"width: 100%; min-height: 792px; display: block;\" />\r\n                      <ng-container *ngIf=\"this.signVisible\">\r\n                        <div *ngFor=\"let component of this.documentImageList\" ngDraggable ngResizable [rzAspectRatio]=\"true\"\r\n                          rzHandles=\"n,s,e,w,se,sw\" class=\"sign-img\" [bounds]=\"mybounds\" [inBounds]=\"true\"\r\n                          (endOffset)=\"onMoveEnd($event, component)\" (rzResizing)=\"onResizing($event, component)\" [rzMinWidth]=\"100\" [rzMaxWidth]=\"612\"\r\n                          [rzMinHeight]=\"100\" [rzMaxHeight]=\"792\" (click)=\"clickComponent(component)\">\r\n                          <img [width]=\"component.scaleX\" [height]=\"component.scaleY\" [src]=\"component.fileContent\" #targetRef>\r\n                        </div>\r\n                      </ng-container> -->\r\n              </ng-template>\r\n              <!-- <ng-template pTemplate=\"thumbnail\" let-item>\r\n                  <div class=\"grid grid-nogutter justify-content-center\">\r\n                    <img [src]=\"item\" style=\"width: auto; height: 100px;\" />\r\n                  </div>\r\n                </ng-template> -->\r\n            </p-galleria>\r\n          </div>\r\n          <!-- <div class=\"bg-img\" #mybounds>\r\n              <img class=\"img-single\" *ngIf=\"showImage\" [src]=\"li_CBScanImage[currentImageIndex].imageBase64\"\r\n                alt=\"รูปภาพ\" [style.scale]=\"zoom\" [style.rotate.deg]=\"degree\">\r\n              <ng-container *ngIf=\"this.signVisible\">\r\n                <div *ngFor=\"let component of this.documentImageList\" ngDraggable ngResizable [rzAspectRatio]=\"true\"\r\n                  rzHandles=\"n,s,e,w,se,sw\" class=\"sign-img\" [bounds]=\"mybounds\" [inBounds]=\"true\"\r\n                  (endOffset)=\"onMoveEnd($event, component)\" (rzResizing)=\"onResizing($event, component)\" [rzMinWidth]=\"100\" [rzMaxWidth]=\"612\"\r\n                  [rzMinHeight]=\"100\" [rzMaxHeight]=\"792\" (click)=\"clickComponent(component)\">\r\n                  <img [width]=\"component.scaleX\" [height]=\"component.scaleY\" [src]=\"component.fileContent\" #targetRef>\r\n                </div>\r\n              </ng-container>\r\n            </div> -->\r\n\r\n          <div class=\"d-flex justify-content-between\">\r\n            <p-button icon=\"pi pi-chevron-left\" (click)=\"showPreviousImage()\"></p-button>\r\n            <p-button icon=\"pi pi-chevron-right\" (click)=\"showNextImage()\"></p-button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- <div>\r\n          <p-dialog class=\"pnDialog\" header=\"เพิ่มลายเซ็น\" [(visible)]=\"DisplaySignDialog\" [modal]=\"true\"\r\n            [dismissableMask]=\"true\" [draggable]=\"false\" [resizable]=\"false\"\r\n            [breakpoints]=\"{'1200px': '60vw', '800px': '90vw'}\" [style]=\"{width: '40vw'}\">\r\n          </p-dialog>\r\n        </div> -->\r\n    </div>\r\n    <div class=\"col-3\">\r\n      <!-- <div class=\"row mt-5\">\r\n          <label htmlFor=\"documentname\">ชื่อเอกสาร</label>\r\n          <input pInputText id=\"documentname\" aria-describedby=\"documentname-help\" [(ngModel)]=\"documentName\" />\r\n        </div> -->\r\n      <div class=\"col mt-5\">\r\n        <p-fileUpload name=\"file[]\" [multiple]=\"false\" [showUploadButton]=\"false\" [showCancelButton]=\"false\"\r\n          accept=\".pdf\" chooseLabel=\"เพิ่มเอกสาร\" [fileLimit]=\"1\" (onSelect)=\"documentUpload($event)\"\r\n          (onRemove)=\"onFileRemove($event)\"></p-fileUpload>\r\n        <!-- <p-button label=\"Add Signature\" (click)=\"editSignImage()\"></p-button> -->\r\n        <!-- <input type=\"file\" id=\"upload\" (change)=\"handleUpload($event)\" multiple hidden>\r\n          <label class=\"chooseButton\" for=\"upload\">Choose File</label> -->\r\n      </div>\r\n      <div class=\"col mt-5\">\r\n        <p-button label=\"เพิ่มข้อความ\" (click)=\"openDialog()\"></p-button>\r\n      </div>\r\n      <div class=\"col mt-5\">\r\n        <p-fileUpload name=\"file[]\" [multiple]=\"true\" [showUploadButton]=\"false\" [showCancelButton]=\"false\"\r\n          accept=\"image/*\" chooseLabel=\"เพิ่มลายเซ็น\" [fileLimit]=\"5\" (onSelect)=\"onFileSelect($event)\"\r\n          (onRemove)=\"onFileRemove($event)\"></p-fileUpload>\r\n        <div class=\"mt-2\">\r\n          <p-button label=\"Stamp\" (click)=\"stamp()\"></p-button>\r\n        </div>\r\n        <!-- <p-button label=\"Add Signature\" (click)=\"editSignImage()\"></p-button> -->\r\n        <!-- <input type=\"file\" id=\"upload\" (change)=\"handleUpload($event)\" multiple hidden>\r\n          <label class=\"chooseButton\" for=\"upload\">Choose File</label> -->\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</body>\r\n\r\n\r\n<p-dialog class=\"pnDialog\" header=\"เพิ่มหัวข้อตัวชี้วัด\" [(visible)]=\"DisplayDialogAddTopic\" [modal]=\"true\"\r\n  [dismissableMask]=\"true\" [draggable]=\"false\" [resizable]=\"false\" [breakpoints]=\"{'1200px': '60vw', '800px': '90vw'}\"\r\n  [style]=\"{width: '40vw'}\">\r\n\r\n  <input id=\"stamp\" type=\"text\" pInputText [(ngModel)]=\"textStamp\" />\r\n  <p-button label=\"เพิ่มข้อความ\" ></p-button>\r\n\r\n</p-dialog>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}