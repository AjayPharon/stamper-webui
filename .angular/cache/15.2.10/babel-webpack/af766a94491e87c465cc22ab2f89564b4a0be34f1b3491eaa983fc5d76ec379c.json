{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/aj_ph/Documents/Esi/stamper-webui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { CBSignImage } from '../Context/CBSignImage';\nimport { lastValueFrom } from 'rxjs';\nimport { environment as env } from '../../environments/environment';\nimport { CBDocumentImage } from '../Context/CBDocumentImage';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../_services/httpConnectService.service\";\nimport * as i2 from \"./../_services/common.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"angular2-draggable\";\nimport * as i5 from \"primeng/button\";\nimport * as i6 from \"primeng/api\";\nimport * as i7 from \"primeng/fileupload\";\nimport * as i8 from \"primeng/galleria\";\nimport * as i9 from \"@angular/forms\";\nimport * as i10 from \"primeng/dialog\";\nfunction SignStamperComponent_ng_template_7_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 22)(2, \"p\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n    const _r2 = i0.ɵɵreference(1);\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"bounds\", _r2)(\"inBounds\", true);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r3.textStamp);\n  }\n}\nfunction SignStamperComponent_ng_template_7_ng_container_4_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵlistener(\"endOffset\", function SignStamperComponent_ng_template_7_ng_container_4_div_1_Template_div_endOffset_0_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const component_r6 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r8.onMoveEnd($event, component_r6));\n    })(\"rzResizing\", function SignStamperComponent_ng_template_7_ng_container_4_div_1_Template_div_rzResizing_0_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const component_r6 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r10.onResizing($event, component_r6));\n    })(\"click\", function SignStamperComponent_ng_template_7_ng_container_4_div_1_Template_div_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const component_r6 = restoredCtx.$implicit;\n      const ctx_r11 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r11.clickComponent(component_r6));\n    });\n    i0.ɵɵelement(1, \"img\", 25, 26);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const component_r6 = ctx.$implicit;\n    i0.ɵɵnextContext(2);\n    const _r2 = i0.ɵɵreference(1);\n    i0.ɵɵproperty(\"rzAspectRatio\", true)(\"bounds\", _r2)(\"inBounds\", true)(\"rzMinWidth\", 100)(\"rzMaxWidth\", 612)(\"rzMinHeight\", 100)(\"rzMaxHeight\", 792);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"width\", component_r6.signWidth)(\"height\", component_r6.signHeight)(\"src\", component_r6.signContent, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction SignStamperComponent_ng_template_7_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, SignStamperComponent_ng_template_7_ng_container_4_div_1_Template, 3, 10, \"div\", 23);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.signImageList);\n  }\n}\nfunction SignStamperComponent_ng_template_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 18, 19)(2, \"img\", 20);\n    i0.ɵɵlistener(\"click\", function SignStamperComponent_ng_template_7_Template_img_click_2_listener($event) {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.showTextFrame($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, SignStamperComponent_ng_template_7_ng_container_3_Template, 4, 3, \"ng-container\", 21);\n    i0.ɵɵtemplate(4, SignStamperComponent_ng_template_7_ng_container_4_Template, 2, 1, \"ng-container\", 21);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", item_r1, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.showText);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.signVisible);\n  }\n}\nconst _c0 = function () {\n  return {\n    \"max-width\": \"612px\"\n  };\n};\nconst _c1 = function () {\n  return {\n    width: \"40vw\"\n  };\n};\nconst _c2 = function () {\n  return {\n    \"1200px\": \"60vw\",\n    \"800px\": \"90vw\"\n  };\n};\nexport class SignStamperComponent {\n  constructor(httpService, commonService) {\n    this.httpService = httpService;\n    this.commonService = commonService;\n    this.xPosition = 0;\n    this.yPosition = 0;\n    this.scaleX = 100;\n    this.scaleY = 100;\n    this.documentID = \"\";\n    this._activeIndex = 0;\n    this.documentImageList = [];\n    this.signImageList = [];\n    this.signVisible = false;\n    this.images = [];\n    this.size = null;\n    this.zoom = 1.0;\n    this.showImage = false;\n    this.degree = 0;\n    this.showGallery = false;\n    this.position = 'bottom';\n    this.textStamp = '';\n    this.showFrame = false;\n    this.textValue = '';\n    this.frameTop = 0;\n    this.frameLeft = 0;\n    this.DisplayDialogAddTopic = false;\n    this.showText = false;\n    this.responsiveOptions = [{\n      breakpoint: '1024px',\n      numVisible: 5\n    }, {\n      breakpoint: '768px',\n      numVisible: 3\n    }, {\n      breakpoint: '560px',\n      numVisible: 1\n    }];\n  }\n  showTextFrame(event) {\n    this.showFrame = true;\n    this.frameTop = event.clientY;\n    this.frameLeft = event.clientX;\n  }\n  confirmText() {\n    // ทำสิ่งที่คุณต้องการเมื่อผู้ใช้ยืนยันข้อความ\n    console.log('ข้อความที่กรอก:', this.textValue);\n    // ซ่อนกล่องพิมข้อความ\n    this.showFrame = false;\n  }\n  saveText() {\n    console.log('ข้อความที่กรอก:', this.textValue);\n  }\n  calculateWidth() {\n    // คำนวณความกว้างของ input จากความยาวของข้อความที่กรอก\n    return this.textValue.length * 10; // ปรับตัวคูณตามความต้องการ\n  }\n\n  openDialog() {\n    this.DisplayDialogAddTopic = true;\n  }\n  submitDialog() {\n    console.log(this.textStamp);\n    this.showText = true;\n    this.DisplayDialogAddTopic = false;\n  }\n  get activeIndex() {\n    return this._activeIndex;\n  }\n  set activeIndex(newValue) {\n    if (this.images && 0 <= newValue && newValue <= this.images.length - 1) {\n      this._activeIndex = newValue;\n    }\n  }\n  ngOnInit() {}\n  onFileSelect(event) {\n    const reader = new FileReader();\n    for (let file of event.files) {\n      reader.readAsDataURL(file);\n      reader.onload = event => {\n        let sign_item = new CBSignImage();\n        sign_item.signContent = reader.result.toString();\n        sign_item.signWidth = this.scaleX;\n        sign_item.signHeight = this.scaleY;\n        sign_item.x = this.xPosition;\n        sign_item.y = this.yPosition;\n        sign_item.pageNumber = this._activeIndex;\n        sign_item.documentID = this.documentID;\n        sign_item.textStamp = this.textStamp;\n        this.signImageList.push(sign_item);\n      };\n    }\n    console.log(this.signImageList);\n    this.signVisible = true;\n  }\n  onFileRemove(event) {\n    event.files.pop();\n  }\n  stamp() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      // let ao_item = new CBSignImage();\n      // ao_item.fileContent = this.signBase64.split(',')[1];\n      // ao_item.scaleX = this.scaleX;\n      // ao_item.scaleY = this.scaleY;\n      // ao_item.xPosition = this.xPosition;\n      // ao_item.yPosition = this.yPosition;\n      console.log(_this.signImageList.at(0)?.x);\n      console.log(_this.signImageList.at(0)?.y);\n      // let payload = new HttpParams().set('requestData', JSON.stringify(this.signImageList))\n      let response = yield lastValueFrom(_this.httpService.ConnectByPOST_JSON(`${env.localhost}/stamper/stampDocument`, _this.signImageList));\n      if (response != null) {\n        console.log('image edited');\n      }\n    })();\n  }\n  documentUpload(event) {\n    const reader = new FileReader();\n    for (let file of event.files) {\n      reader.readAsDataURL(file);\n      reader.onload = event => {\n        this.upload(file, 100);\n        // let document_item = new CBDocumentImage();\n        // document_item.fileContent = reader.result!.toString();\n        // document_item.scaleX = this.scaleX;\n        // document_item.scaleY = this.scaleY;\n        // document_item.xPosition = this.xPosition;\n        // document_item.yPosition = this.yPosition;\n        // document_item.imageId = this.li_CBImage[this.activeIndex].id\n        // this.documentImageList.push(document_item);\n      };\n    }\n  }\n\n  upload(file, ai_letterType) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      const methodName = \"multiupload\";\n      console.log(\"START \" + methodName);\n      let urlPath = env.localhost + \"/stamper/convert\";\n      let formData = new FormData();\n      formData.append('file', file);\n      formData.append('filename', file.name);\n      formData.append('letterType', ai_letterType.toString());\n      console.log(\"ทดสอบ\", formData.getAll('file'));\n      try {\n        const response = yield _this2.httpService.ConnectByPOSTFormData(urlPath, formData).toPromise();\n        console.log(\"Upload response:\", response);\n        let documentCB = new CBDocumentImage(_this2.commonService);\n        documentCB.JSONToCB(response);\n        _this2.documentID = documentCB.documentID;\n        _this2.documentImageList = documentCB.imageBase64;\n        console.log('id', _this2.documentID);\n      } catch (error) {\n        console.error(\"Upload error:\", error);\n      }\n    })();\n  }\n  showNextImage() {\n    this._activeIndex++;\n    // this.currentImageIndex = (this.currentImageIndex + 1) % this.li_CBScanImage.length;\n    // for (let i = 0; i < this.documentImageList.length; i++) {\n    //   console.log('image id: ',this.documentImageList.at(i)['imageId']);\n    //   console.log('image index: ',this.activeIndex);\n    //   if (this.documentImageList.at(this.activeIndex) === this.documentImageList.at(i)) {\n    //     this.signVisible = true;\n    //   } else {\n    //     this.signVisible = false;\n    //   }\n    // }\n  }\n\n  showPreviousImage() {\n    this._activeIndex--;\n    // this.currentImageIndex = (this.currentImageIndex - 1 + this.li_CBScanImage.length) % this.li_CBScanImage.length;\n    // for (let i = 0; i < this.documentImageList.length; i++) {\n    //   console.log('image id: ',this.documentImageList.at(i)['imageId']);\n    //   console.log('image index: ',this.activeIndex);\n    //   if (this.documentImageList.at(this.activeIndex) === this.documentImageList.at(i)) {\n    //     this.signVisible = true;\n    //     console.log(this.documentImageList.at(i));\n    //   } else {\n    //     this.signVisible = false;\n    //   }\n    // }\n  }\n\n  clickComponent(component) {\n    console.log('click', component);\n  }\n  onMoveEnd(event, component) {\n    component.x = event.x;\n    component.y = event.y;\n    console.log(event.x, event.y);\n    console.log('index : ', this._activeIndex);\n  }\n  onResizing(event, component) {\n    this.size = event.size;\n    console.log(this.size);\n    component.signWidth = event.size.width;\n    component.signHeight = event.size.height;\n  }\n  static #_ = this.ɵfac = function SignStamperComponent_Factory(t) {\n    return new (t || SignStamperComponent)(i0.ɵɵdirectiveInject(i1.HttpConnectService), i0.ɵɵdirectiveInject(i2.CommonService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SignStamperComponent,\n    selectors: [[\"app-sign-stamper\"]],\n    decls: 23,\n    vars: 28,\n    consts: [[1, \"d-flex\"], [1, \"col-8\"], [1, \"d-flex\", \"justify-content-center\"], [1, \"d-flex\", \"flex-column\"], [1, \"card\"], [3, \"value\", \"showItemNavigators\", \"thumbnailsPosition\", \"showThumbnails\", \"activeIndex\", \"responsiveOptions\", \"containerStyle\", \"numVisible\", \"activeIndexChange\"], [\"pTemplate\", \"item\"], [1, \"d-flex\", \"justify-content-between\"], [\"icon\", \"pi pi-chevron-left\", 3, \"click\"], [\"icon\", \"pi pi-chevron-right\", 3, \"click\"], [1, \"col-3\"], [1, \"col\", \"mt-5\"], [\"name\", \"file[]\", \"accept\", \".pdf\", \"chooseLabel\", \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E40\\u0E2D\\u0E01\\u0E2A\\u0E32\\u0E23\", 3, \"multiple\", \"showUploadButton\", \"showCancelButton\", \"fileLimit\", \"onSelect\", \"onRemove\"], [\"name\", \"file[]\", \"accept\", \"image/*\", \"chooseLabel\", \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E25\\u0E32\\u0E22\\u0E40\\u0E0B\\u0E47\\u0E19\", 3, \"multiple\", \"showUploadButton\", \"showCancelButton\", \"fileLimit\", \"onSelect\", \"onRemove\"], [\"label\", \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E02\\u0E49\\u0E2D\\u0E04\\u0E27\\u0E32\\u0E21\", 3, \"click\"], [\"label\", \"Stamp\", 3, \"click\"], [\"header\", \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E02\\u0E49\\u0E2D\\u0E04\\u0E27\\u0E32\\u0E21\", 1, \"pnDialog\", 3, \"visible\", \"modal\", \"dismissableMask\", \"draggable\", \"resizable\", \"breakpoints\", \"visibleChange\"], [\"id\", \"stamp\", \"type\", \"text\", \"pInputText\", \"\", 3, \"ngModel\", \"ngModelChange\"], [1, \"bg-img\"], [\"mybounds\", \"\"], [\"alt\", \"\\u0E23\\u0E39\\u0E1B\\u0E20\\u0E32\\u0E1E\", 1, \"img-single\", 3, \"src\", \"click\"], [4, \"ngIf\"], [\"ngDraggable\", \"\", 1, \"text-stamp\", 3, \"bounds\", \"inBounds\"], [\"ngDraggable\", \"\", \"ngResizable\", \"\", \"rzHandles\", \"n,s,e,w,se,sw\", \"class\", \"sign-img\", 3, \"rzAspectRatio\", \"bounds\", \"inBounds\", \"rzMinWidth\", \"rzMaxWidth\", \"rzMinHeight\", \"rzMaxHeight\", \"endOffset\", \"rzResizing\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"ngDraggable\", \"\", \"ngResizable\", \"\", \"rzHandles\", \"n,s,e,w,se,sw\", 1, \"sign-img\", 3, \"rzAspectRatio\", \"bounds\", \"inBounds\", \"rzMinWidth\", \"rzMaxWidth\", \"rzMinHeight\", \"rzMaxHeight\", \"endOffset\", \"rzResizing\", \"click\"], [3, \"width\", \"height\", \"src\"], [\"targetRef\", \"\"]],\n    template: function SignStamperComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"body\")(1, \"div\", 0)(2, \"div\", 1)(3, \"div\", 2)(4, \"div\", 3)(5, \"div\", 4)(6, \"p-galleria\", 5);\n        i0.ɵɵlistener(\"activeIndexChange\", function SignStamperComponent_Template_p_galleria_activeIndexChange_6_listener($event) {\n          return ctx.activeIndex = $event;\n        });\n        i0.ɵɵtemplate(7, SignStamperComponent_ng_template_7_Template, 5, 3, \"ng-template\", 6);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(8, \"div\", 7)(9, \"p-button\", 8);\n        i0.ɵɵlistener(\"click\", function SignStamperComponent_Template_p_button_click_9_listener() {\n          return ctx.showPreviousImage();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"p-button\", 9);\n        i0.ɵɵlistener(\"click\", function SignStamperComponent_Template_p_button_click_10_listener() {\n          return ctx.showNextImage();\n        });\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(11, \"div\", 10)(12, \"div\", 11)(13, \"p-fileUpload\", 12);\n        i0.ɵɵlistener(\"onSelect\", function SignStamperComponent_Template_p_fileUpload_onSelect_13_listener($event) {\n          return ctx.documentUpload($event);\n        })(\"onRemove\", function SignStamperComponent_Template_p_fileUpload_onRemove_13_listener($event) {\n          return ctx.onFileRemove($event);\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(14, \"div\", 11)(15, \"p-fileUpload\", 13);\n        i0.ɵɵlistener(\"onSelect\", function SignStamperComponent_Template_p_fileUpload_onSelect_15_listener($event) {\n          return ctx.onFileSelect($event);\n        })(\"onRemove\", function SignStamperComponent_Template_p_fileUpload_onRemove_15_listener($event) {\n          return ctx.onFileRemove($event);\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(16, \"div\", 11)(17, \"p-button\", 14);\n        i0.ɵɵlistener(\"click\", function SignStamperComponent_Template_p_button_click_17_listener() {\n          return ctx.openDialog();\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(18, \"div\", 11)(19, \"p-button\", 15);\n        i0.ɵɵlistener(\"click\", function SignStamperComponent_Template_p_button_click_19_listener() {\n          return ctx.stamp();\n        });\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(20, \"p-dialog\", 16);\n        i0.ɵɵlistener(\"visibleChange\", function SignStamperComponent_Template_p_dialog_visibleChange_20_listener($event) {\n          return ctx.DisplayDialogAddTopic = $event;\n        });\n        i0.ɵɵelementStart(21, \"input\", 17);\n        i0.ɵɵlistener(\"ngModelChange\", function SignStamperComponent_Template_input_ngModelChange_21_listener($event) {\n          return ctx.textStamp = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"p-button\", 14);\n        i0.ɵɵlistener(\"click\", function SignStamperComponent_Template_p_button_click_22_listener() {\n          return ctx.submitDialog();\n        });\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"value\", ctx.documentImageList)(\"showItemNavigators\", true)(\"thumbnailsPosition\", ctx.position)(\"showThumbnails\", false)(\"activeIndex\", ctx.activeIndex)(\"responsiveOptions\", ctx.responsiveOptions)(\"containerStyle\", i0.ɵɵpureFunction0(25, _c0))(\"numVisible\", 5);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"multiple\", false)(\"showUploadButton\", false)(\"showCancelButton\", false)(\"fileLimit\", 1);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"multiple\", true)(\"showUploadButton\", false)(\"showCancelButton\", false)(\"fileLimit\", 5);\n        i0.ɵɵadvance(5);\n        i0.ɵɵstyleMap(i0.ɵɵpureFunction0(26, _c1));\n        i0.ɵɵproperty(\"visible\", ctx.DisplayDialogAddTopic)(\"modal\", true)(\"dismissableMask\", true)(\"draggable\", false)(\"resizable\", false)(\"breakpoints\", i0.ɵɵpureFunction0(27, _c2));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngModel\", ctx.textStamp);\n      }\n    },\n    dependencies: [i3.NgForOf, i3.NgIf, i4.AngularDraggableDirective, i4.AngularResizableDirective, i5.Button, i6.PrimeTemplate, i7.FileUpload, i8.Galleria, i9.DefaultValueAccessor, i9.NgControlStatus, i9.NgModel, i10.Dialog],\n    styles: [\"@charset \\\"UTF-8\\\";\\n.image-list[_ngcontent-%COMP%] {\\n  display: flex; \\n  flex-wrap: wrap; \\n  gap: 16px; \\n}\\n\\n.image-slider[_ngcontent-%COMP%] {\\n  width: 1700px;\\n  height: 2200px;\\n  border: 1px solid #000000;\\n  overflow: hidden;\\n  cursor: move;\\n  box-sizing: border-box;\\n  transform: scale(100%);\\n  transform: translate(0%, 0%);\\n  display: inline-flex;\\n  z-index: 1;\\n}\\n\\n.img-single[_ngcontent-%COMP%] {\\n  max-width: 100%;\\n  max-height: 100%;\\n}\\n\\nhtml[_ngcontent-%COMP%], body[_ngcontent-%COMP%] {\\n  height: 100%;\\n}\\n\\nbody[_ngcontent-%COMP%] {\\n  margin: 0;\\n  font-family: Roboto, \\\"Helvetica Neue\\\", sans-serif;\\n}\\n\\n.sign-box[_ngcontent-%COMP%] {\\n  position: absolute;\\n  box-sizing: border-box;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  transform: translate(0%, 0%);\\n}\\n\\n.bg-img[_ngcontent-%COMP%] {\\n  width: 612px;\\n  height: 792px;\\n  border: solid 1px #000000;\\n  top: 0;\\n  left: 0;\\n  cursor: move;\\n  display: inline-flex;\\n  justify-content: center;\\n  align-items: center;\\n  text-align: center;\\n  background: #fff;\\n  z-index: 1;\\n  box-sizing: border-box;\\n}\\n\\n.sign-img[_ngcontent-%COMP%] {\\n  position: absolute;\\n  width: 100px;\\n  height: 100px;\\n  top: 0px;\\n  left: 0px;\\n  transform: translate(0px, 0px);\\n}\\n\\n.chooseButton[_ngcontent-%COMP%] {\\n  display: inline-block;\\n  background-color: indigo;\\n  color: white;\\n  padding: 0.5rem;\\n  font-family: sans-serif;\\n  border-radius: 0.3rem;\\n  cursor: pointer;\\n  margin-top: 1rem;\\n  margin-left: 1rem;\\n}\\n\\n.text-stamp[_ngcontent-%COMP%] {\\n  position: absolute;\\n  border: 1px solid black;\\n  background-color: transparent;\\n  color: black;\\n  font-size: 16px;\\n  text-align: center;\\n  height: 25px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvc2lnbi1zdGFtcGVyL3NpZ24tc3RhbXBlci5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxnQkFBZ0I7QUFBaEI7RUFDSSxhQUFBLEVBQUEsbUNBQUE7RUFDQSxlQUFBLEVBQUEsa0NBQUE7RUFDQSxTQUFBLEVBQUEsMEJBQUE7QUFFSjs7QUFDRTtFQUlFLGFBQUE7RUFDQSxjQUFBO0VBQ0EseUJBQUE7RUFDQSxnQkFBQTtFQUVBLFlBQUE7RUFDQSxzQkFBQTtFQUNBLHNCQUFBO0VBQ0EsNEJBQUE7RUFDQSxvQkFBQTtFQUNBLFVBQUE7QUFGSjs7QUFLRTtFQUNFLGVBQUE7RUFDQSxnQkFBQTtBQUZKOztBQVFFO0VBQWEsWUFBQTtBQUpmOztBQUtFO0VBQU8sU0FBQTtFQUFXLGlEQUFBO0FBQXBCOztBQUVFO0VBS0Usa0JBQUE7RUFFQSxzQkFBQTtFQUNBLGtCQUFBO0VBQ0EsTUFBQTtFQUNBLE9BQUE7RUFDQSw0QkFBQTtBQUpKOztBQU1FO0VBQ0UsWUFBQTtFQUNBLGFBQUE7RUFDQSx5QkFBQTtFQUVBLE1BQUE7RUFDQSxPQUFBO0VBQ0EsWUFBQTtFQUNBLG9CQUFBO0VBQ0EsdUJBQUE7RUFDQSxtQkFBQTtFQUNBLGtCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxVQUFBO0VBQ0Esc0JBQUE7QUFKSjs7QUFRRTtFQUNFLGtCQUFBO0VBQ0EsWUFBQTtFQUNBLGFBQUE7RUFDQSxRQUFBO0VBQ0EsU0FBQTtFQUNBLDhCQUFBO0FBTEo7O0FBUUU7RUFDRSxxQkFBQTtFQUNBLHdCQUFBO0VBQ0EsWUFBQTtFQUNBLGVBQUE7RUFDQSx1QkFBQTtFQUNBLHFCQUFBO0VBQ0EsZUFBQTtFQUNBLGdCQUFBO0VBQ0EsaUJBQUE7QUFMSjs7QUFRRTtFQUNFLGtCQUFBO0VBQ0EsdUJBQUE7RUFDQSw2QkFBQTtFQUNBLFlBQUE7RUFDQSxlQUFBO0VBQ0Esa0JBQUE7RUFDQSxZQUFBO0FBTEoiLCJzb3VyY2VzQ29udGVudCI6WyIuaW1hZ2UtbGlzdCB7XHJcbiAgICBkaXNwbGF5OiBmbGV4OyAvKiDDoMK5woPDoMK4wqvDoMK5wonDoMK4wqPDoMK4wrnDoMK4wpvDoMK4wqDDoMK4wrLDoMK4wp7DoMK5woHDoMK4wqrDoMK4wpTDoMK4wofDoMK5woDDoMK4wqPDoMK4wrXDoMK4wqLDoMK4wofDoMK4wpXDoMK5wojDoMK4wq3DoMK4woHDoMK4wrHDoMK4wpnDoMK5woHDoMK4wpnDoMK4wqfDoMK4wpnDoMK4wq3DoMK4wpkgKi9cclxuICAgIGZsZXgtd3JhcDogd3JhcDsgLyogw6DCucKDw6DCuMKrw6DCucKJw6DCuMKCw6DCuMK2w6DCucKJw6DCuMKZw6DCuMKaw6DCuMKjw6DCuMKjw6DCuMKXw6DCuMKxw6DCuMKUw6DCucKDw6DCuMKrw6DCuMKhw6DCucKIw6DCucKAw6DCuMKhw6DCuMK3w6DCucKIw6DCuMKtw6DCuMKEw6DCuMKjw6DCuMKaw6DCuMKCw6DCuMKZw6DCuMKyw6DCuMKUICovXHJcbiAgICBnYXA6IDE2cHg7IC8qIMOgwrjCo8OgwrjCsMOgwrjCosOgwrjCsMOgwrjCq8OgwrnCiMOgwrjCssOgwrjCh8OgwrjCo8OgwrjCsMOgwrjCq8OgwrjCp8OgwrnCiMOgwrjCssOgwrjCh8OgwrjCo8OgwrjCucOgwrjCm8OgwrjCoMOgwrjCssOgwrjCniAqL1xyXG4gIH1cclxuICBcclxuICAuaW1hZ2Utc2xpZGVyIHtcclxuICAgIC8vIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAvLyBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgLy8ganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xyXG4gICAgd2lkdGg6IDE3MDBweDtcclxuICAgIGhlaWdodDogMjIwMHB4O1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgIzAwMDAwMDtcclxuICAgIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgICAvLyBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBjdXJzb3I6IG1vdmU7XHJcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gICAgdHJhbnNmb3JtOiBzY2FsZSgxMDAlKTtcclxuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKDAlLCAwJSk7XHJcbiAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcclxuICAgIHotaW5kZXg6IDE7XHJcbiAgfVxyXG4gIFxyXG4gIC5pbWctc2luZ2xlIHtcclxuICAgIG1heC13aWR0aDogMTAwJTtcclxuICAgIG1heC1oZWlnaHQ6IDEwMCU7XHJcbiAgICAvLyB0cmFuc2Zvcm06IHNjYWxlKDAuNSk7XHJcbiAgICAvLyBkaXNwbGF5OiBibG9jaztcclxuICAgIC8vIG1hcmdpbjogMCBhdXRvO1xyXG4gIH1cclxuICBcclxuICBodG1sLCBib2R5IHsgaGVpZ2h0OiAxMDAlOyB9XHJcbiAgYm9keSB7IG1hcmdpbjogMDsgZm9udC1mYW1pbHk6IFJvYm90bywgXCJIZWx2ZXRpY2EgTmV1ZVwiLCBzYW5zLXNlcmlmOyB9XHJcbiAgXHJcbiAgLnNpZ24tYm94IHtcclxuICAgIC8vIGN1cnNvcjogbW92ZTtcclxuICAgIC8vIGRpc3BsYXk6IGlubGluZS1mbGV4O1xyXG4gICAgLy8ganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgICAvLyBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgLy8gei1pbmRleDogMTtcclxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICB0b3A6IDA7XHJcbiAgICBsZWZ0OiAwO1xyXG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCUsIDAlKTtcclxuICB9XHJcbiAgLmJnLWltZyB7XHJcbiAgICB3aWR0aDogNjEycHg7XHJcbiAgICBoZWlnaHQ6IDc5MnB4O1xyXG4gICAgYm9yZGVyOiBzb2xpZCAxcHggIzAwMDAwMDtcclxuICAgIC8vIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgIHRvcDogMDtcclxuICAgIGxlZnQ6IDA7XHJcbiAgICBjdXJzb3I6IG1vdmU7XHJcbiAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcclxuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgIGJhY2tncm91bmQ6ICNmZmY7XHJcbiAgICB6LWluZGV4OiAxO1xyXG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICAgIC8vIHRyYW5zZm9ybTogdHJhbnNsYXRlKDBweCwgMHB4KTtcclxuICB9XHJcbiAgXHJcbiAgLnNpZ24taW1nIHtcclxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgIHdpZHRoOiAxMDBweDtcclxuICAgIGhlaWdodDogMTAwcHg7XHJcbiAgICB0b3A6IDBweDtcclxuICAgIGxlZnQ6IDBweDtcclxuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKDBweCwgMHB4KTtcclxuICB9XHJcbiAgXHJcbiAgLmNob29zZUJ1dHRvbiB7XHJcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBpbmRpZ287XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgICBwYWRkaW5nOiAwLjVyZW07XHJcbiAgICBmb250LWZhbWlseTogc2Fucy1zZXJpZjtcclxuICAgIGJvcmRlci1yYWRpdXM6IDAuM3JlbTtcclxuICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgIG1hcmdpbi10b3A6IDFyZW07XHJcbiAgICBtYXJnaW4tbGVmdDogMXJlbTtcclxuICB9XHJcbiAgXHJcbiAgLnRleHQtc3RhbXAge1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcclxuICAgIGNvbG9yOiBibGFjaztcclxuICAgIGZvbnQtc2l6ZTogMTZweDtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgIGhlaWdodDogMjVweDtcclxuICB9Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"mappings":"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","names":["CBSignImage","lastValueFrom","environment","env","CBDocumentImage","i0","SignStamperComponent","constructor","httpService","commonService","breakpoint","numVisible","showTextFrame","event","showFrame","frameTop","clientY","frameLeft","clientX","confirmText","console","log","textValue","saveText","calculateWidth","length","openDialog","DisplayDialogAddTopic","submitDialog","textStamp","showText","activeIndex","_activeIndex","newValue","images","ngOnInit","onFileSelect","reader","FileReader","file","files","readAsDataURL","onload","sign_item","signContent","result","toString","signWidth","scaleX","signHeight","scaleY","x","xPosition","y","yPosition","pageNumber","documentID","signImageList","push","signVisible","onFileRemove","pop","stamp","at","response","ConnectByPOST_JSON","localhost","documentUpload","upload","ai_letterType","methodName","urlPath","formData","FormData","append","name","getAll","ConnectByPOSTFormData","toPromise","documentCB","JSONToCB","documentImageList","imageBase64","error","showNextImage","showPreviousImage","clickComponent","component","onMoveEnd","onResizing","size","width","height","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\aj_ph\\Documents\\Esi\\stamper-webui\\src\\app\\sign-stamper\\sign-stamper.component.ts","C:\\Users\\aj_ph\\Documents\\Esi\\stamper-webui\\src\\app\\sign-stamper\\sign-stamper.component.html"],"sourcesContent":["import { CommonService } from './../_services/common.service';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { CBSignImage } from '../Context/CBSignImage';\r\nimport { HttpParams } from '@angular/common/http';\r\nimport { lastValueFrom } from 'rxjs';\r\nimport { HttpConnectService } from '../_services/httpConnectService.service';\r\nimport { environment as env } from '../../environments/environment';\r\nimport { CBDocumentImage } from '../Context/CBDocumentImage';\r\ninterface UploadEvent {\r\n  originalEvent: Event;\r\n  files: File[];\r\n}\r\n\r\n@Component({\r\n  selector: 'app-sign-stamper',\r\n  templateUrl: './sign-stamper.component.html',\r\n  styleUrls: ['./sign-stamper.component.scss']\r\n})\r\n\r\nexport class SignStamperComponent implements OnInit {\r\n  xPosition: number = 0;\r\n  yPosition: number = 0;\r\n  scaleX: number = 100;\r\n  scaleY: number = 100;\r\n  documentID: string = \"\";\r\n  _activeIndex: number = 0;\r\n  documentImageList: any[] = [];\r\n  signImageList: CBSignImage[] = []\r\n  signVisible = false;\r\n  images: any[] = [];\r\n  size: any = null;\r\n  zoom: number = 1.0;\r\n  showImage = false;\r\n  degree: number = 0;\r\n  showGallery = false;\r\n  position: string = 'bottom';\r\n  textStamp: string = '';\r\n\r\n  showFrame = false;\r\n  textValue = '';\r\n  frameTop = 0;\r\n  frameLeft = 0;\r\n\r\n  \r\n  DisplayDialogAddTopic: boolean = false;\r\n\r\n  showText = false;\r\n\r\n  constructor(   \r\n    private httpService: HttpConnectService,\r\n    private commonService : CommonService) { }\r\n\r\n    showTextFrame(event: MouseEvent) {\r\n      this.showFrame = true;\r\n      this.frameTop = event.clientY;\r\n      this.frameLeft = event.clientX;\r\n    }\r\n  \r\n    confirmText() {\r\n      // ทำสิ่งที่คุณต้องการเมื่อผู้ใช้ยืนยันข้อความ\r\n      console.log('ข้อความที่กรอก:', this.textValue);\r\n  \r\n      // ซ่อนกล่องพิมข้อความ\r\n      this.showFrame = false;\r\n    }\r\n\r\n     saveText() {\r\n      console.log('ข้อความที่กรอก:', this.textValue);\r\n    }\r\n\r\n    calculateWidth(): number {\r\n      // คำนวณความกว้างของ input จากความยาวของข้อความที่กรอก\r\n      return this.textValue.length * 10; // ปรับตัวคูณตามความต้องการ\r\n    }\r\n\r\n    openDialog() {\r\n      this.DisplayDialogAddTopic = true;\r\n    }\r\n\r\n    submitDialog() {\r\n      console.log(this.textStamp);\r\n      this.showText = true\r\n      this.DisplayDialogAddTopic = false;\r\n    }\r\n    \r\n  get activeIndex(): number {\r\n    return this._activeIndex;\r\n  }\r\n\r\n  set activeIndex(newValue) {\r\n    if (this.images && 0 <= newValue && newValue <= this.images.length - 1) {\r\n      this._activeIndex = newValue;\r\n    }\r\n  }\r\n\r\n  responsiveOptions: any[] = [\r\n    {\r\n      breakpoint: '1024px',\r\n      numVisible: 5\r\n    },\r\n    {\r\n      breakpoint: '768px',\r\n      numVisible: 3\r\n    },\r\n    {\r\n      breakpoint: '560px',\r\n      numVisible: 1\r\n    }\r\n  ];\r\n  ngOnInit() {\r\n\r\n  }\r\n  onFileSelect(event: UploadEvent) {\r\n    const reader = new FileReader();\r\n    for (let file of event.files) {\r\n      reader.readAsDataURL(file);\r\n      reader.onload = (event) => {\r\n        let sign_item = new CBSignImage();\r\n        sign_item.signContent = reader.result!.toString();\r\n        sign_item.signWidth = this.scaleX;\r\n        sign_item.signHeight = this.scaleY;\r\n        sign_item.x = this.xPosition;\r\n        sign_item.y = this.yPosition;\r\n        sign_item.pageNumber = this._activeIndex;\r\n        sign_item.documentID = this.documentID;\r\n        sign_item.textStamp =  this.textStamp;\r\n        this.signImageList.push(sign_item);\r\n      }\r\n    }\r\n    console.log(this.signImageList);\r\n    \r\n\r\n    this.signVisible = true;\r\n  }\r\n\r\n  onFileRemove(event: UploadEvent) {\r\n    event.files.pop();\r\n  }\r\n\r\n  async stamp() {\r\n    // let ao_item = new CBSignImage();\r\n    // ao_item.fileContent = this.signBase64.split(',')[1];\r\n    // ao_item.scaleX = this.scaleX;\r\n    // ao_item.scaleY = this.scaleY;\r\n    // ao_item.xPosition = this.xPosition;\r\n    // ao_item.yPosition = this.yPosition;\r\n    console.log(this.signImageList.at(0)?.x);\r\n    console.log(this.signImageList.at(0)?.y);\r\n    \r\n    // let payload = new HttpParams().set('requestData', JSON.stringify(this.signImageList))\r\n    let response = await lastValueFrom(this.httpService.ConnectByPOST_JSON(`${env.localhost}/stamper/stampDocument`, this.signImageList));\r\n    if (response != null) {\r\n      console.log('image edited');\r\n    }\r\n  }\r\n  documentUpload(event: UploadEvent) {\r\n    const reader = new FileReader();\r\n    for (let file of event.files) {\r\n      reader.readAsDataURL(file);\r\n      reader.onload = (event) => {\r\n        this.upload(file,100);\r\n        // let document_item = new CBDocumentImage();\r\n        // document_item.fileContent = reader.result!.toString();\r\n        // document_item.scaleX = this.scaleX;\r\n        // document_item.scaleY = this.scaleY;\r\n        // document_item.xPosition = this.xPosition;\r\n        // document_item.yPosition = this.yPosition;\r\n        // document_item.imageId = this.li_CBImage[this.activeIndex].id\r\n        // this.documentImageList.push(document_item);\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  async upload(file: File, ai_letterType: number){\r\n    const methodName = \"multiupload\";\r\n    console.log(\"START \" + methodName);\r\n    let urlPath: string = env.localhost + \"/stamper/convert\";\r\n    let formData = new FormData();\r\n    formData.append('file', file);\r\n    formData.append('filename',file.name)\r\n    formData.append('letterType', ai_letterType.toString());\r\n    console.log(\"ทดสอบ\",formData.getAll('file'));\r\n    try {\r\n        const response = await this.httpService.ConnectByPOSTFormData(urlPath, formData).toPromise();\r\n        console.log(\"Upload response:\", response);\r\n        let documentCB = new CBDocumentImage(this.commonService);\r\n        documentCB.JSONToCB(response);\r\n        this.documentID = documentCB.documentID;\r\n        this.documentImageList = documentCB.imageBase64;\r\n        console.log('id' , this.documentID);\r\n        \r\n    } catch (error) {\r\n        console.error(\"Upload error:\", error);\r\n    }\r\n  }\r\n\r\n  showNextImage() {\r\n    this._activeIndex++;\r\n    // this.currentImageIndex = (this.currentImageIndex + 1) % this.li_CBScanImage.length;\r\n\r\n    // for (let i = 0; i < this.documentImageList.length; i++) {\r\n    //   console.log('image id: ',this.documentImageList.at(i)['imageId']);\r\n    //   console.log('image index: ',this.activeIndex);\r\n    //   if (this.documentImageList.at(this.activeIndex) === this.documentImageList.at(i)) {\r\n    //     this.signVisible = true;\r\n    //   } else {\r\n    //     this.signVisible = false;\r\n    //   }\r\n    // }\r\n  }\r\n\r\n  showPreviousImage() {\r\n    this._activeIndex--;\r\n    // this.currentImageIndex = (this.currentImageIndex - 1 + this.li_CBScanImage.length) % this.li_CBScanImage.length;\r\n    // for (let i = 0; i < this.documentImageList.length; i++) {\r\n    //   console.log('image id: ',this.documentImageList.at(i)['imageId']);\r\n    //   console.log('image index: ',this.activeIndex);\r\n    //   if (this.documentImageList.at(this.activeIndex) === this.documentImageList.at(i)) {\r\n    //     this.signVisible = true;\r\n    //     console.log(this.documentImageList.at(i));\r\n\r\n\r\n    //   } else {\r\n    //     this.signVisible = false;\r\n    //   }\r\n    // }\r\n  }\r\n\r\n  clickComponent(component: CBSignImage) {\r\n    console.log('click', component);\r\n  }\r\n\r\n  onMoveEnd(event: any, component: CBSignImage) {\r\n    component.x = event.x;\r\n    component.y = event.y;\r\n    console.log(event.x, event.y);\r\n    console.log('index : ', this._activeIndex);\r\n  }\r\n\r\n  onResizing(event: any, component: CBSignImage) {\r\n    this.size = event.size;\r\n    console.log(this.size);\r\n    component.signWidth = event.size.width;\r\n    component.signHeight = event.size.height;\r\n  }\r\n}\r\n","<body>\r\n  <div class=\"d-flex\">\r\n    <div class=\"col-8\">\r\n      <div class=\"d-flex justify-content-center\">\r\n        <div class=\"d-flex flex-column \">\r\n          <div class=\"card\">\r\n            <p-galleria [value]=\"documentImageList\" [showItemNavigators]=\"true\" [thumbnailsPosition]=\"position\"\r\n              [showThumbnails]=\"false\" [(activeIndex)]=\"activeIndex\" [responsiveOptions]=\"responsiveOptions\"\r\n              [containerStyle]=\"{ 'max-width': '612px' }\" [numVisible]=\"5\">\r\n              <ng-template pTemplate=\"item\" let-item>\r\n                <div class=\"bg-img\" #mybounds>\r\n                  <img class=\"img-single\" [src]=\"item\" alt=\"รูปภาพ\" (click)=\"showTextFrame($event)\">\r\n\r\n                  <ng-container *ngIf=\"showText\">\r\n                    <div class=\"text-stamp\" ngDraggable [bounds]=\"mybounds\" [inBounds]=\"true\">\r\n                      <p>{{this.textStamp}}</p>\r\n                    </div>\r\n                  </ng-container>\r\n\r\n                  <ng-container *ngIf=\"this.signVisible\">\r\n                    <div *ngFor=\"let component of this.signImageList\" ngDraggable ngResizable [rzAspectRatio]=\"true\"\r\n                      rzHandles=\"n,s,e,w,se,sw\" class=\"sign-img\" [bounds]=\"mybounds\" [inBounds]=\"true\"\r\n                      (endOffset)=\"onMoveEnd($event, component)\" (rzResizing)=\"onResizing($event, component)\"\r\n                      [rzMinWidth]=\"100\" [rzMaxWidth]=\"612\" [rzMinHeight]=\"100\" [rzMaxHeight]=\"792\"\r\n                      (click)=\"clickComponent(component)\">\r\n                      <img [width]=\"component.signWidth\" [height]=\"component.signHeight\" [src]=\"component.signContent\"\r\n                        #targetRef>\r\n                    </div>\r\n                  </ng-container>\r\n                </div>\r\n                <!-- <img [src]=\"item.imageBase64\" style=\"width: 100%; min-height: 792px; display: block;\" />\r\n                      <ng-container *ngIf=\"this.signVisible\">\r\n                        <div *ngFor=\"let component of this.documentImageList\" ngDraggable ngResizable [rzAspectRatio]=\"true\"\r\n                          rzHandles=\"n,s,e,w,se,sw\" class=\"sign-img\" [bounds]=\"mybounds\" [inBounds]=\"true\"\r\n                          (endOffset)=\"onMoveEnd($event, component)\" (rzResizing)=\"onResizing($event, component)\" [rzMinWidth]=\"100\" [rzMaxWidth]=\"612\"\r\n                          [rzMinHeight]=\"100\" [rzMaxHeight]=\"792\" (click)=\"clickComponent(component)\">\r\n                          <img [width]=\"component.scaleX\" [height]=\"component.scaleY\" [src]=\"component.fileContent\" #targetRef>\r\n                        </div>\r\n                      </ng-container> -->\r\n              </ng-template>\r\n              <!-- <ng-template pTemplate=\"thumbnail\" let-item>\r\n                  <div class=\"grid grid-nogutter justify-content-center\">\r\n                    <img [src]=\"item\" style=\"width: auto; height: 100px;\" />\r\n                  </div>\r\n                </ng-template> -->\r\n            </p-galleria>\r\n          </div>\r\n          <!-- <div class=\"bg-img\" #mybounds>\r\n              <img class=\"img-single\" *ngIf=\"showImage\" [src]=\"li_CBScanImage[currentImageIndex].imageBase64\"\r\n                alt=\"รูปภาพ\" [style.scale]=\"zoom\" [style.rotate.deg]=\"degree\">\r\n              <ng-container *ngIf=\"this.signVisible\">\r\n                <div *ngFor=\"let component of this.documentImageList\" ngDraggable ngResizable [rzAspectRatio]=\"true\"\r\n                  rzHandles=\"n,s,e,w,se,sw\" class=\"sign-img\" [bounds]=\"mybounds\" [inBounds]=\"true\"\r\n                  (endOffset)=\"onMoveEnd($event, component)\" (rzResizing)=\"onResizing($event, component)\" [rzMinWidth]=\"100\" [rzMaxWidth]=\"612\"\r\n                  [rzMinHeight]=\"100\" [rzMaxHeight]=\"792\" (click)=\"clickComponent(component)\">\r\n                  <img [width]=\"component.scaleX\" [height]=\"component.scaleY\" [src]=\"component.fileContent\" #targetRef>\r\n                </div>\r\n              </ng-container>\r\n            </div> -->\r\n\r\n          <div class=\"d-flex justify-content-between\">\r\n            <p-button icon=\"pi pi-chevron-left\" (click)=\"showPreviousImage()\"></p-button>\r\n            <p-button icon=\"pi pi-chevron-right\" (click)=\"showNextImage()\"></p-button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- <div>\r\n          <p-dialog class=\"pnDialog\" header=\"เพิ่มลายเซ็น\" [(visible)]=\"DisplaySignDialog\" [modal]=\"true\"\r\n            [dismissableMask]=\"true\" [draggable]=\"false\" [resizable]=\"false\"\r\n            [breakpoints]=\"{'1200px': '60vw', '800px': '90vw'}\" [style]=\"{width: '40vw'}\">\r\n          </p-dialog>\r\n        </div> -->\r\n    </div>\r\n    <div class=\"col-3\">\r\n      <div class=\"col mt-5\">\r\n        <p-fileUpload name=\"file[]\" [multiple]=\"false\" [showUploadButton]=\"false\" [showCancelButton]=\"false\"\r\n          accept=\".pdf\" chooseLabel=\"เพิ่มเอกสาร\" [fileLimit]=\"1\" (onSelect)=\"documentUpload($event)\"\r\n          (onRemove)=\"onFileRemove($event)\"></p-fileUpload>\r\n      </div>\r\n      <div class=\"col mt-5\">\r\n        <p-fileUpload name=\"file[]\" [multiple]=\"true\" [showUploadButton]=\"false\" [showCancelButton]=\"false\"\r\n          accept=\"image/*\" chooseLabel=\"เพิ่มลายเซ็น\" [fileLimit]=\"5\" (onSelect)=\"onFileSelect($event)\"\r\n          (onRemove)=\"onFileRemove($event)\"></p-fileUpload>\r\n\r\n      </div>\r\n      <div class=\"col mt-5\">\r\n        <p-button label=\"เพิ่มข้อความ\" (click)=\"openDialog()\"></p-button>\r\n      </div>\r\n      <div class=\"col mt-5\">\r\n        <p-button label=\"Stamp\" (click)=\"stamp()\"></p-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</body>\r\n\r\n\r\n<p-dialog class=\"pnDialog\" header=\"เพิ่มข้อความ\" [(visible)]=\"DisplayDialogAddTopic\" [modal]=\"true\"\r\n  [dismissableMask]=\"true\" [draggable]=\"false\" [resizable]=\"false\" [breakpoints]=\"{'1200px': '60vw', '800px': '90vw'}\"\r\n  [style]=\"{width: '40vw'}\">\r\n  <input id=\"stamp\" type=\"text\" pInputText [(ngModel)]=\"textStamp\" />\r\n  <p-button label=\"เพิ่มข้อความ\" (click)=\"submitDialog()\"></p-button>\r\n</p-dialog>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}